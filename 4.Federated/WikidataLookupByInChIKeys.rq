PREFIX biopax:  <http://www.biopax.org/release/biopax-level3.owl#> PREFIX cito:    <http://purl.org/spar/cito/> PREFIX dc:      <http://purl.org/dc/elements/1.1/> PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX foaf:    <http://xmlns.com/foaf/0.1/> PREFIX freq:    <http://purl.org/cld/freq/> PREFIX gpml:    <http://vocabularies.wikipathways.org/gpml#>
PREFIX owl:     <http://www.w3.org/2002/07/owl#> PREFIX pav:     <http://purl.org/pav/> PREFIX prov:    <http://www.w3.org/ns/prov#> PREFIX rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX rdfs:    <http://www.w3.org/2000/01/rdf-schema#> PREFIX skos:    <http://www.w3.org/2004/02/skos/core#> PREFIX void:    <http://rdfs.org/ns/void#>
PREFIX wp:      <http://vocabularies.wikipathways.org/wp#> PREFIX wprdf:   <http://rdf.wikipathways.org/> PREFIX xsd:     <http://www.w3.org/2001/XMLSchema#> PREFIX pmw:		<http://rdf-plantmetwiki.bioinformatics.nl/pathways/> PREFIX ncbi:    <http://purl.obolibrary.org/obo/NCBITaxon_> PREFIX ro:		<http://purl.obolibrary.org/obo/RO_> 
PREFIX bioregistry: <https://bioregistry.io/mibig:> 

#Federated prefixes:
PREFIX wd:          <http://www.wikidata.org/entity/> PREFIX wdt:         <http://www.wikidata.org/prop/direct/> PREFIX p:           <http://www.wikidata.org/prop/> PREFIX pq:          <http://www.wikidata.org/prop/qualifier/> 

SELECT ?pwID (GROUP_CONCAT(DISTINCT ?species; separator=", ") as ?Species) ?name ?wd ?ingredientLabel
FROM <http://plantmetwiki.bioinformatics.nl/>
WHERE {
  ?metabolite a wp:Metabolite ;                	#Retrieve all DataNodes of Type Metabolite
              rdfs:label ?name ;				#To connect ot textLabels for chemical compounds/Metabolites
              dcterms:isPartOf ?pw ;           	#Connect these to specific pathways for priority count later
              dc:source "InChIKey" ;           	#Database for annotations is InChIKey
              dcterms:identifier ?inchikey .   	#Retrieve InChIKey
  
  ##metabolite list with names of interest 
  FILTER(?name IN ( "caffeine",
      				"theobromine",
      				"sugar")) 
  
   ?pw a wp:Pathway ;                          #Define pathways
       dc:identifier ?pwID ; 				   #Collect the pathway IDs
       wp:organismName ?species .			   #Retrieve the species in which this compound is produced/consumed
  
  
  SERVICE <https://query.wikidata.org/sparql> {
     ?wd wdt:P235  ?inchikey ;
         wdt:P3780 ?ingredient .
     OPTIONAL { ?ingredient rdfs:label ?ingredientLabel . FILTER(LANG(?ingredientLabel) = "en") }
  }
} ORDER BY ?name
